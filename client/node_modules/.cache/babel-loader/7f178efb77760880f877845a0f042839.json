{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/chichi/Desktop/cs510-course-project/client/src/components/Home/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport { parseSearchBoxData } from './SearchBox/SearchBox';\nimport SearchBox from './SearchBox/SearchBox';\nimport Courses from './Courses/Courses';\nimport './Home.css';\nlet socket;\n\nconst Home = ({\n  location\n}) => {\n  _s();\n\n  const ENDPOINT = 'localhost:5000';\n  const [joinUniversity, setJoinUniversity] = useState('');\n  const [joinCourse, setJoinCourse] = useState('');\n  const [createUniversity, setCreateUniversity] = useState('');\n  const [createCourse, setCreateCourse] = useState('');\n  const [newCourse, setNewCourse] = useState([]);\n  const [deleteCourses, setDeleteCourses] = useState([]);\n  const [courses, setCourses] = useState([]); // real-time course list\n\n  const [joinCourses, setJoinCourses] = useState([]); // search course suggestion\n\n  const [universities, setUniversites] = useState([]); // universities suggestion\n\n  const [update, setUpdate] = useState(0); // alert course updates\n  // Handle home join server\n\n  useEffect(() => {\n    socket = io(ENDPOINT);\n    socket.emit('homeJoin', {\n      message: \"Home joined!\"\n    }, () => {// alert(error);\n    });\n    socket.emit('getUniversities', {\n      message: \"List Universites\"\n    }, message => {\n      console.log(\"getUniversities:\", message[\"universities\"]);\n      setUniversites(message[\"universities\"]);\n    });\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [ENDPOINT, location.search]); // Handle real-time course list\n\n  useEffect(() => {\n    if (!createUniversity) {\n      return;\n    }\n\n    socket.emit('getCourses', {\n      university: createUniversity\n    }, message => {\n      console.log(\"getCourses:\", message[\"courses\"]);\n      setCourses(message[\"courses\"]);\n    });\n  }, [createUniversity, update]); // Handle real-time search course suggestion\n\n  useEffect(() => {\n    if (!joinUniversity) {\n      return;\n    }\n\n    socket.emit('getCourses', {\n      university: joinUniversity\n    }, message => {\n      console.log(\"getCourses:\", message[\"courses\"]);\n      setJoinCourses(message[\"courses\"]);\n    });\n  }, [joinUniversity, update]); // -----------------------------------------------------------------------------------\n  // Handle courses create, delete\n\n  const remindCourseUpdate = () => {\n    if (update === 0) {\n      // reminds other UseEffects to refresh course list\n      setUpdate(update + 1);\n    } else {\n      setUpdate(update - 1);\n    }\n  };\n\n  useEffect(() => {\n    if (newCourse.length === 0) {\n      return;\n    }\n\n    socket.emit(\"addCourse\", {\n      university: newCourse[0],\n      course: newCourse[1]\n    }, message => {\n      console.log(\"addCourse: \", message);\n      remindCourseUpdate();\n    });\n  }, [newCourse]);\n  useEffect(() => {\n    if (deleteCourses.length === 0) {\n      return;\n    }\n\n    console.log(\"delete\", deleteCourses[0], deleteCourses[1]);\n    socket.emit('deleteCourse', {\n      university: deleteCourses[0],\n      courses: [deleteCourses[1]]\n    }, message => {\n      console.log(\"deleteCourse\", message);\n      remindCourseUpdate();\n    });\n  }, [deleteCourses]); // -----------------------------------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"homeOuterContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"homeInnerContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchBox, {\n        placeholder: \"Search for University...\",\n        data: universities,\n        setRecordKey: setJoinUniversity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchBox, {\n        placeholder: \"Search for Course...\",\n        data: parseSearchBoxData(joinCourses),\n        setRecordKey: setJoinCourse\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        onClick: event => !joinUniversity || !joinCourse ? event.preventDefault() : null,\n        to: `/questions?university=${joinUniversity}&course=${joinCourse}`,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button mt-20\",\n          type: \"submit\",\n          children: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Home, \"p7g4yRkIQCDfaGCNCnV3APVBg4E=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/chichi/Desktop/cs510-course-project/client/src/components/Home/Home.js"],"names":["React","useState","useEffect","Link","io","parseSearchBoxData","SearchBox","Courses","socket","Home","location","ENDPOINT","joinUniversity","setJoinUniversity","joinCourse","setJoinCourse","createUniversity","setCreateUniversity","createCourse","setCreateCourse","newCourse","setNewCourse","deleteCourses","setDeleteCourses","courses","setCourses","joinCourses","setJoinCourses","universities","setUniversites","update","setUpdate","emit","message","console","log","off","search","university","remindCourseUpdate","length","course","event","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport io from 'socket.io-client';\n\nimport { parseSearchBoxData } from './SearchBox/SearchBox';\nimport SearchBox from './SearchBox/SearchBox';\nimport Courses from './Courses/Courses';\nimport './Home.css';\n\nlet socket; \n\n\nconst Home = ({ location }) => {\n    const ENDPOINT = 'localhost:5000';\n\n    const [joinUniversity, setJoinUniversity] = useState('');\n    const [joinCourse, setJoinCourse] = useState('');\n    const [createUniversity, setCreateUniversity] = useState('');\n    const [createCourse, setCreateCourse] = useState('');\n    const [newCourse, setNewCourse] = useState([]);\n\n    const [deleteCourses, setDeleteCourses] = useState([]);\n    const [courses, setCourses] = useState([]); // real-time course list\n    const [joinCourses, setJoinCourses] = useState([]); // search course suggestion\n    const [universities, setUniversites] = useState([]); // universities suggestion\n\n    const [update, setUpdate] = useState(0); // alert course updates\n\n    // Handle home join server\n    useEffect(() => {\n    socket = io(ENDPOINT);\n\n    socket.emit('homeJoin', { message: \"Home joined!\" }, () => {\n        // alert(error);\n    } );\n\n    socket.emit('getUniversities', { message: \"List Universites\" }, (message) => {\n        console.log(\"getUniversities:\", message[\"universities\"]);\n        setUniversites(message[\"universities\"]);\n    });\n\n    return () => {\n        socket.emit('disconnect');\n        socket.off();\n    }\n    }, [ENDPOINT, location.search]);    \n\n    \n    // Handle real-time course list\n    useEffect(() => {\n        if (!createUniversity) {\n            return;\n        }\n        socket.emit('getCourses', {university: createUniversity}, (message) => {\n            console.log(\"getCourses:\", message[\"courses\"]);\n            setCourses(message[\"courses\"]);\n        });\n    }, [createUniversity, update]);\n\n    // Handle real-time search course suggestion\n    useEffect(() => {\n        if (!joinUniversity) {\n            return;\n        }\n        socket.emit('getCourses', { university: joinUniversity }, (message) => {\n            console.log(\"getCourses:\", message[\"courses\"]);\n            setJoinCourses(message[\"courses\"]);\n        });\n    }, [joinUniversity, update])\n\n    // -----------------------------------------------------------------------------------\n    // Handle courses create, delete\n    const remindCourseUpdate = () => {\n        if (update === 0) { // reminds other UseEffects to refresh course list\n            setUpdate(update + 1);\n        } else {\n            setUpdate(update - 1);\n        }\n    }\n\n    useEffect(() => {\n        if (newCourse.length === 0) {\n            return;\n        }\n        socket.emit(\"addCourse\", {university: newCourse[0], course: newCourse[1] }, (message) => {\n            console.log(\"addCourse: \", message);\n            remindCourseUpdate();\n        });\n    }, [newCourse]);\n\n    useEffect(() => {\n        if (deleteCourses.length === 0) {\n            return;\n        }\n        console.log(\"delete\", deleteCourses[0], deleteCourses[1]);\n        socket.emit('deleteCourse', { university: deleteCourses[0], courses: [deleteCourses[1]] }, (message) => {\n            console.log(\"deleteCourse\", message);\n            remindCourseUpdate();\n        });\n    }, [deleteCourses])\n    // -----------------------------------------------------------------------------------\n\n\n    return (\n        <div className=\"homeOuterContainer\">\n            <div className=\"homeInnerContainer\">\n                <h2 className=\"heading\">Search</h2>\n                <SearchBox placeholder=\"Search for University...\" data={universities} setRecordKey={setJoinUniversity}/>\n                <SearchBox placeholder=\"Search for Course...\" data={parseSearchBoxData(joinCourses)} setRecordKey={setJoinCourse}/>\n            \n                <Link onClick={event => (!joinUniversity || !joinCourse) ? event.preventDefault() : null} to={`/questions?university=${joinUniversity}&course=${joinCourse}`}>\n                    <button className=\"button mt-20\" type=\"submit\">Join</button>\n                </Link>\n            </div>\n\n            {/* <div className=\"homeInnerContainer\">\n                <h2 className=\"heading\">Create</h2>\n                <SearchBox placeholder=\"Search for University...\" data={universities} setRecordKey={setCreateUniversity}/>\n                <input placeholder=\" Create Course here...\" className=\"homeInput\" type=\"text\" onChange={(event) => setCreateCourse(event.target.value)} />\n                <button className=\"button mt-20\" type=\"submit\" onClick={(event) => setNewCourse([createUniversity, createCourse])}>Create</button>\n            </div>\n            \n            <div className=\"homeInnerContainer\">\n                {(createUniversity) ? \n                <div>\n                <h2 className=\"heading\">{createUniversity} Courses</h2>\n                <Courses courses={courses} deleteCourses={deleteCourses} setDeleteCourses={setDeleteCourses} university={createUniversity} /> \n                </div>\n                : null }\n            </div> */}\n        </div>\n        \n        \n    )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}