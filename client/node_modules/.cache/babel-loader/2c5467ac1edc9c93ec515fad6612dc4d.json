{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/chichi/Desktop/cs510-course-project/client/src/components/User/User.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\nimport { Link } from 'react-router-dom';\nimport './User.css';\nlet socket;\n\nconst Course = ({\n  course,\n  university\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"courseContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"courseBox\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        onClick: event => !university || !course ? event.preventDefault() : null,\n        to: `/join?university=${university}&course=${course}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"courseText\",\n          children: [university, \"-\", course]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Course;\n\nconst User = ({\n  location\n}) => {\n  _s();\n\n  const {\n    name\n  } = queryString.parse(location.search);\n  const ENDPOINT = 'localhost:5000';\n  const [user, setUser] = useState({});\n  const [likes, setLikes] = useState([]);\n  const [recommend, setRecommend] = useState([]);\n  useEffect(() => {\n    socket = io(ENDPOINT);\n    socket.emit('getUser', {\n      name\n    }, message => {\n      console.log(\"Get User:\", message);\n      setUser(message.user);\n      console.log(message.user);\n      console.log(\"recommend get user\", message.user);\n      getRecommendation(message.user.likes);\n    });\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n\n  const getRecommendation = likes => {\n    socket.emit('recommend', {\n      likes\n    }, message => {\n      console.log('get recommend course: ', message.courses);\n      setRecommend(message.courses);\n    });\n  };\n\n  const _renderLikes = object => {\n    return Object.keys(object).map((row, i) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [row != \"_id\" && row != \"likes\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"entryButton mt-20\",\n          type: \"submit\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [row, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 104\n          }, this), \" \", object[row]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 54\n        }, this) : null, row == \"likes\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"entryButton mt-20\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Likes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 71\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 36\n        }, this) : null, row == \"likes\" ? object[row].map(like => {\n          var splits = like.split(\"-\");\n          const university = splits[0];\n          const course = splits[1];\n          return /*#__PURE__*/_jsxDEV(Course, {\n            course: course,\n            university: university\n          }, like, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 28\n          }, this);\n        }) : null]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this);\n    });\n  };\n\n  const _renderRecommend = recommend => {\n    return recommend.map((entry, i) => {\n      var splits = entry.split(\"-\");\n      var university = splits[0];\n      var course = splits[1];\n      return /*#__PURE__*/_jsxDEV(Course, {\n        course: course,\n        university: university\n      }, `recommend-${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editOuterContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"heading\",\n      children: \"Edit Course Info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editInnerContainer\",\n      children: [_renderLikes(user), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"entryButton mt-20\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Recommend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), _renderRecommend(recommend), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button mt-20\",\n          type: \"submit\",\n          children: \"Return\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(User, \"apeMFi9dDjq4ObZ0OfAbT0uR7tI=\");\n\n_c2 = User;\nexport default User;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Course\");\n$RefreshReg$(_c2, \"User\");","map":{"version":3,"sources":["/Users/chichi/Desktop/cs510-course-project/client/src/components/User/User.js"],"names":["React","useState","useEffect","queryString","io","Link","socket","Course","course","university","event","preventDefault","User","location","name","parse","search","ENDPOINT","user","setUser","likes","setLikes","recommend","setRecommend","emit","message","console","log","getRecommendation","off","courses","_renderLikes","object","Object","keys","map","row","i","like","splits","split","_renderRecommend","entry"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\nimport { Link } from 'react-router-dom';\n\nimport './User.css';\n\nlet socket; \n\nconst Course = ({ course, university }) => {\n    return (\n    <div className=\"courseContainer\">\n        <div className=\"courseBox\">\n            <Link onClick={event => (!university || !course) ? event.preventDefault() : null} to={`/join?university=${university}&course=${course}`}>\n            <p className=\"courseText\">{university}-{course}</p>\n            </Link>\n        </div>\n    </div>\n    )\n}\n\nconst User = ( {location} ) => {\n    const { name } = queryString.parse(location.search);\n    const ENDPOINT = 'localhost:5000';\n    const [user, setUser] = useState({});\n    const [likes, setLikes] = useState([]);\n    const [recommend, setRecommend] = useState([]);\n   \n    useEffect(() => {\n        socket = io(ENDPOINT);\n\n        socket.emit('getUser', { name }, (message) => {\n            console.log(\"Get User:\", message);\n            setUser(message.user);\n            console.log(message.user);\n            console.log(\"recommend get user\", message.user);\n            getRecommendation(message.user.likes);\n        });\n\n        return () => {\n            socket.emit('disconnect');\n            socket.off();\n        }\n    }, [ENDPOINT, location.search]); \n    \n    const getRecommendation = (likes) => {\n        socket.emit('recommend', { likes }, (message) => {\n            console.log('get recommend course: ', message.courses);\n            setRecommend(message.courses);\n        })\n    }\n\n    const _renderLikes = (object) => {\n        return Object.keys(object).map((row, i) => {\n            return (\n            <div key={i}>\n                { (row != \"_id\" && row != \"likes\") ? <div className=\"entryButton mt-20\" type=\"submit\"> <b>{row}:</b> {object[row]}</div> : null}\n                { row == \"likes\" ? <div className=\"entryButton mt-20\"><h2>Likes</h2></div> : null }\n                { row == \"likes\" ? object[row].map((like) => {\n                    var splits = like.split(\"-\");\n                    const university = splits[0];\n                    const course = splits[1];\n                    return <Course key={like} course={course} university={university}/>\n                }): null }\n            </div>\n            )\n        })\n    }\n\n    const _renderRecommend = (recommend) => {\n        return (recommend.map((entry, i) => {\n            var splits = entry.split(\"-\");\n            var university = splits[0];\n            var course = splits[1];\n            return <Course key={`recommend-${i}`} course={course} university={university}/>\n        }))\n    }\n    \n\n    return (\n    <div className=\"editOuterContainer\">\n        <h2 className=\"heading\">Edit Course Info</h2>\n        <div className=\"editInnerContainer\">\n            {_renderLikes(user)}\n            <div className=\"entryButton mt-20\"><h2>Recommend</h2></div>\n            {_renderRecommend(recommend)}\n            <Link to=\"/\">\n                <button className=\"button mt-20\" type=\"submit\">Return</button>\n            </Link>\n        </div>\n    </div>\n    )\n}\n\nexport default User;"]},"metadata":{},"sourceType":"module"}